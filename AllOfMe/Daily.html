<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title></title>
	<script src="Scripts/knockout-3.4.2.debug.js"></script>

	<script src="/Scripts/Gods/Him.js"></script>
	<script src="/Scripts/Gods/CSharp/Me.js"></script>
	<script src="/Scripts/Gods/Javascript/Me.js"></script>
	<script src="/Scripts/Gods/His.js"></script>
	<script src="/Scripts/AllOfMe/DailyViewModel.js"></script>
	<script src="/Scripts/AllOfMe/Daily.js"></script>
</head>
<body>
	<!--ko if:I.FindMyself()-->
	<h1><a data-bind="text: I.Name" href="javascript:me.Leave();"></a>⚡<i data-bind="text: DailyState.Energy"></i></h1>
	<!--ko if:!DailyState.Energy()-->
	<form>
		<label>今天：<input type="text" name="dailyContent" data-bind="value: DailyState.Content" placeholder="感觉如何？开心就多写点。" /></label>
		<input type="button" value="确定" onclick="me.WakeUp(this);" />
	</form>
	<!--/ko-->
	<!--ko if:DailyState.Energy-->
	<p data-bind="text: DailyState.Content"></p>
	<!--/ko-->
	<!--/ko-->
	<!--ko if:!I.FindMyself()-->
	<form>
		<label>用户名：<input type="text" required name="name" data-bind="value: I.Name" /></label>
		<label>密码：<input type="password" required name="password" /></label>
		<input type="button" value="确定" onclick="me.FindMyself(this);" />
	</form>
	<!--/ko-->
	<!--ko if:DailyState.Energy-->
	<form data-bind="with: PendingPlan">
		<label>我想要：<input type="text" name="thing" data-bind="value: Content" required /></label>
		<label>试一试(<span data-bind="text: $root.DailyState.DesireCount"></span>)：<input type="checkbox" name="test" data-bind="checked: Testing" /></label>
		<input type="button" onclick="me.Desire(this)" value="确定" data-bind="attr:{}" alt="qwer" placeholder="098i09" />
		<!--ko if:Required--><span>这需要 <span data-bind="text:Required"></span> 点能量值</span><!--/ko-->
	</form>
	<!--/ko-->
	<!--ko if:I.FindMyself()-->
	<form>
		<label>开始最早：<input type="datetime" name="start" /></label>
		<label>结束最晚：<input type="datetime" name="end" /></label>
		<label>达成最早：<input type="datetime" name="start" /></label>
		<label>达成最晚：<input type="datetime" name="end" /></label>
		<label>最少需要：<input type="range" name="minRequired" /></label>
		<label>最多需要：<input type="range" name="maxRequired" /></label>
		<label>达成最少：<input type="range" name="minValue" /></label>
		<label>达成最多：<input type="range" name="maxValue" /></label>
		<label>已放弃：<input type="checkbox" value="abandoned" /></label>
		<label>已完成：<input type="checkbox" value="done" /></label>
		<input type="button" value="确定" onclick="me.ArrangePrepare(this);" />
	</form>
	<fieldset>
		<legend>我的全部计划</legend>
		<!--ko if:!Plans().length-->
		<span>无</span>
		<!--/ko-->
		<!--ko if:Plans().length-->
		<table>
			<thead>
				<tr>
					<th>内容</th>
					<th>难度</th>
					<th>努力次数</th>
					<th>完成百分比/时间</th>
					<th>全部</th>
					<th>已完成</th>
					<th>剩余</th>
				</tr>
			</thead>
			<tbody data-bind="foreach: Plans">
				<tr>
					<td data-bind="text: Content, click: function(i) { $root.CurrentPlan($root.CurrentPlan() === i ? null : i); }"></td>
					<td data-bind="text: Difficulty + ' * ' + MinEffortsCount"></td>
					<td data-bind="text: Efforts().length"></td>
					<td data-bind="text: Progress"></td>
					<td data-bind="text: Required"></td>
					<td data-bind="text: Current"></td>
					<td data-bind="text: Left"></td>
				</tr>
				<!--ko if:$root.CurrentPlan()===$data-->
				<!--ko foreach:Efforts-->
				<tr>
					<td data-bind="text: Content" colspan="3"></td>
					<td data-bind="text: Payed"></td>
					<td></td>
					<td data-bind="text: (Payed / $parent.Required).toFixed(2)"></td>
				</tr>
				<!--/ko-->
				<!--ko if:$root.DailyState.Energy-->
				<tr>
					<td>继续努力：</td>
					<td colspan="5">
						<form>
							<input type="hidden" name="planId" data-bind="value: Id" />
							<input type="text" name="content" data-bind="value: $root.PendingEffort" required /><input type="button" value="确定" onclick="me.Pay(this);" />
						</form>
					</td>
					<td>
						<input type="button" value="放弃" onclick="me.GiveUp(this);" />
					</td>
				</tr>
				<!--/ko-->
				<!--/ko-->
			</tbody>
		</table>
		<!--/ko-->
	</fieldset>
	<!--/ko-->
</body>
</html>