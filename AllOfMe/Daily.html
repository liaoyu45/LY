<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title></title>
	<script src="Scripts/knockout-3.4.2.debug.js"></script>

	<script src="/Scripts/Gods/Him.js"></script>
	<script src="/Scripts/Gods/CSharp/Me.js"></script>
	<script src="/Scripts/Gods/Javascript/Me.js"></script>
	<script src="/Scripts/Gods/His.js"></script>
	<script src="/Scripts/AllOfMe/Daily/ViewModel.js"></script>
	<script src="/Scripts/AllOfMe/Daily/Callbacks.js"></script>
	<script src="/Scripts/AllOfMe/Daily/Effects.js"></script>

	<link href="App_Themes/AllOfMe/Daily.css" rel="stylesheet" />
</head>
<body>
	<!--ko if:I.FindMyself()-->
	<h1>
		<a style="font-size: 111px;" data-bind="text: I.Name" href="javascript:me.Leave();"></a>
		<!--ko if:DailyState-->
		<span data-bind="text: DailyState"></span>
		<!--/ko-->
	</h1>
	<!--ko if:!DailyState()-->
	<form>
		<label>今天：<input type="text" name="dailyContent" placeholder="感觉如何？开心就多写点。" /></label>
		<input type="button" value="确定" onclick="me.WakeUp(this);" />
	</form>
	<!--/ko-->
	<!--/ko-->
	<!--ko if:!I.FindMyself()-->
	<form>
		<label>用户名：<input type="text" required name="name" data-bind="value: I.Name" /></label>
		<label>密码：<input type="password" required name="password" /></label>
		<input type="button" value="确定" onclick="me.FindMyself(this);" />
	</form>
	<!--/ko-->
	<!--ko if:I.FindMyself()-->
	<form>
		<label>我想要：<input type="text" name="thing" data-bind="value: PendingPlan" required /></label>
		<input type="button" onclick="me.Desire(this)" value="确定" />
	</form>
	<form data-him="QueryPlans">
		<label>开始最早：<input type="date" name="start" /></label>
		<label>结束最晚：<input type="date" name="end" /></label>
		<label>达成最早：<input type="date" name="start" /></label>
		<label>达成最晚：<input type="date" name="end" /></label>
		<label>已放弃：<input type="checkbox" value="abandoned" /></label>
		<label>已完成：<input type="checkbox" value="done" /></label>
		<input type="button" value="确定" onclick="me.QueryPlans(this);" />
	</form>
	<fieldset>
		<legend>我的全部计划</legend>
		<!--ko if:!Plans().length-->
		<span>无</span>
		<!--/ko-->
		<!--ko if:Plans().length-->
		<table style="border-collapse: collapse; table-layout: fixed; width: 100%;">
			<thead>
				<tr>
					<th>始于</th>
					<th>内容</th>
					<th>努力次数</th>
					<th>完成状态</th>
				</tr>
			</thead>
			<tbody data-bind="foreach: Plans">
				<tr onclick="me.QueryEfforts();">
					<td>
						<span data-bind="text: AppearTime"></span>
						<form style="display:none;" data-him="QueryEfforts">
							<input type="hidden" name="planId" data-bind="value: Id"/>
						</form>
					</td>
					<td data-bind="text: Content"></td>
					<td data-bind="text: Efforts.length"></td>
					<td data-bind="text: DoneTime"></td>
				</tr>
				<!--ko if:$root.CurrentPlan()===$data-->
				<!--ko foreach:Efforts-->
				<tr>
					<td data-bind="text: AppearTime"></td>
					<td colspan="3" data-bind="text: Content"></td>
				</tr>
				<!--/ko-->
				<tr>
					<td colspan="4">
						<form style="display:inline;width:100%;">从：<input type="date" data-bind="value:AppearTime" name="effortStart" />至：<input type="date" name="effortEnd" /></form>
						<form style="display:inline;width:100%;">
							继续努力：
							<input type="hidden" name="planId" data-bind="value: Id" />
							<input type="text" name="content" data-bind="value: $root.PendingEffort" required />
							<input type="button" value="确定" onclick="me.Pay(this);" />
							<input type="button" value="放弃" onclick="me.GiveUp(this);" />
						</form>
					</td>
				</tr>
				<!--/ko-->
			</tbody>
		</table>
		<!--/ko-->
	</fieldset>
	<!--/ko-->
</body>
</html>