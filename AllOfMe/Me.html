<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title></title>
	<style type="text/css">
		html, body {
			width: 100%;
			height: 100%;
			margin: 0;
		}

		body {
			background-color: #b9b9b9;
		}

		#mainButton {
		}
	</style>
</head>
<body>
	<script src="god.js"></script>
	<svg xmlns="http://www.w3.org/2000/svg" width="88" height="88" id="mainButton" style="position:fixed; display: none;">
		<circle cx="44" cy="44" r="44" fill="red"></circle>
	</svg>
	<script type="text/javascript">
		function distance(p, pp) {
			return Math.sqrt(Math.pow(p.pageX - pp.pageX, 2) + Math.pow(p.pageY - pp.pageY, 2));
		}
		var main;
		function start(e) {
			if (main) {
				return;
			}
			main = {};
			var t0 = e.targetTouches[0];
			for (var i in t0) {
				main[i] = t0[i];
			}
			mainButton.addEventListener("touchmove", move);
		}
		function move(e) {
			var t0 = e.targetTouches[0];
			if (distance(main, t0) > 33) {
				document.title = "hahwlerh";
			}
		}
		function myfunction(width, height, fx, fy, dx, dy) {
			if (dx < 0 || dy < 0 || dx > width || dy > height) {
				return 0;
			}
			var k = getK(dx, dy, fx, fy);
			var kk = getK(0, 0, fx, fx);
			var kkk = getK(width, 0, fx, fy);
			var kkkk = getK(width, height, fx, fy);
			var kkkkk = getK(0, height, fx, fy);
			if ((k > kk || k < kkk) && dy < fy) {
				return Math.abs(dy / fy);
			}
			if (k > kkk && k < kkkk && dx > fx) {
				return Math.abs((width - dx) / (width - fx));
			}
			if ((k > kkkk || k < kkkkk) && dy > fy) {
				return Math.abs((height - dy) / (height - fy));
			}
			return Math.abs(dx / fx);
		}
		function getK(x, y, xx, yy) {
			return (yy - y) / (xx - x);
		}
		var mo = god.window.dragable(mainButton, document.body, true);
		mo.onstart = function (e) {
			this.element.style.left = e.pageX - 44;
		}
		mo.onmove = function (x, y, nx, ny) {
			var w = myfunction(document.body.clientWidth - mainButton.clientHeight, document.body.clientHeight - mainButton.clientHeight, x, y, nx, ny);
			this.element.getElementsByTagNameNS("http://www.w3.org/2000/svg", "circle")[0].style.opacity = w;
		};
		mo.onrelease = mo.onset = function () {
			this.element.style.display = "none";
			this.element.getElementsByTagNameNS("http://www.w3.org/2000/svg", "circle")[0].style.opacity = 1;
		};
		god.window.setCenter(mainButton, 1);
	</script>
</body>
</html>
